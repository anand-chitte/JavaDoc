<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://anand-chitte.github.io/JavaDoc/other/RabbitMQ/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>RabbitMQ - Java</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/custom.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/properties.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/shell.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Java</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Java</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../java/introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../java/How%20Java%20Works/" class="dropdown-item">How Java Works</a>
</li>
                                    
<li>
    <a href="../../java/Java%20Virtual%20Machine%20%28JVM%29/" class="dropdown-item">JVM</a>
</li>
                                    
<li>
    <a href="../../java/Garbage%20Collector/" class="dropdown-item">Garbage Collector</a>
</li>
                                    
<li>
    <a href="../../java/DataType/" class="dropdown-item">Data Type</a>
</li>
                                    
<li>
    <a href="../../java/Operators/" class="dropdown-item">Operators</a>
</li>
                                    
<li>
    <a href="../../java/Casting/" class="dropdown-item">Casting</a>
</li>
                                    
<li>
    <a href="../../java/AccessModifier/" class="dropdown-item">Access Modifier</a>
</li>
                                    
<li>
    <a href="../../java/Object-Oriented%20Programming/" class="dropdown-item">Object-Oriented Programming</a>
</li>
                                    
<li>
    <a href="../../java/Constructor/" class="dropdown-item">Constructor</a>
</li>
                                    
<li>
    <a href="../../java/Method%20overloading%20%26%20overiding/" class="dropdown-item">Method overloading & overriding</a>
</li>
                                    
<li>
    <a href="../../java/StaticFinalKeyword/" class="dropdown-item">Static & Final Keyword</a>
</li>
                                    
<li>
    <a href="../../java/String/" class="dropdown-item">String</a>
</li>
                                    
<li>
    <a href="../../java/Interface/" class="dropdown-item">Interface</a>
</li>
                                    
<li>
    <a href="../../java/Exception%20in%20Java/" class="dropdown-item">Exception</a>
</li>
                                    
<li>
    <a href="../../java/Generics/" class="dropdown-item">Generics</a>
</li>
                                    
<li>
    <a href="../../java/FunctionalInterface/" class="dropdown-item">Functional Interface</a>
</li>
                                    
<li>
    <a href="../../java/LambdaExpression/" class="dropdown-item">Lambda Expression</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Thread</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../java/thread/Thread/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../java/thread/Synchronization/" class="dropdown-item">Synchronization</a>
</li>
                                    
<li>
    <a href="../../java/thread/Locks/" class="dropdown-item">Locks</a>
</li>
                                    
<li>
    <a href="../../java/thread/ExecutorFramework/" class="dropdown-item">Executor Frameworks</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Collection Framework</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../java/collection/Collection%20Framework/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../java/collection/Hashmap/" class="dropdown-item">Hashmap</a>
</li>
                                    
<li>
    <a href="../../java/collection/Comparable%20vs%20Compartor/" class="dropdown-item">Comparable vs Compartor</a>
</li>
                                    
<li>
    <a href="../../java/collection/Iterator%20%26%20Iterable/" class="dropdown-item">Iterator vs Iterable</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Stream</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../java/stream/Stream/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../java/stream/CreatingStream/" class="dropdown-item">Creating Stream</a>
</li>
                                    
<li>
    <a href="../../java/stream/IntermediateOperation/" class="dropdown-item">Intermediate Operation</a>
</li>
                                    
<li>
    <a href="../../java/stream/TerminalOperation/" class="dropdown-item">Terminal Operation</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Other</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../java/other/MarkerInterface/" class="dropdown-item">Marker Interface</a>
</li>
                                    
<li>
    <a href="../../java/other/Solid/" class="dropdown-item">SOLID</a>
</li>
                                    
<li>
    <a href="../../java/other/ReflectionAPI/" class="dropdown-item">Reflection API</a>
</li>
                                    
<li>
    <a href="../../java/other/DesignPattern/" class="dropdown-item">Design Pattern</a>
</li>
                                    
<li>
    <a href="../../java/other/FunctionalProgramming/" class="dropdown-item">Functional Programming</a>
</li>
                                    
<li>
    <a href="../../java/other/Versions/" class="dropdown-item">Java Versions</a>
</li>
                                    
<li>
    <a href="../../java/other/FlightRecorder/" class="dropdown-item">Flight Recorder</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Spring</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../spring/Introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../spring/Spring%20Container/" class="dropdown-item">Spring Container</a>
</li>
                                    
<li>
    <a href="../../spring/Bean/" class="dropdown-item">Bean</a>
</li>
                                    
<li>
    <a href="../../spring/Spring%20Boot/" class="dropdown-item">Spring Boot</a>
</li>
                                    
<li>
    <a href="../../spring/Spring%20Profiles/" class="dropdown-item">Spring Profiles</a>
</li>
                                    
<li>
    <a href="../../spring/Actuator/" class="dropdown-item">Spring Actuator</a>
</li>
                                    
<li>
    <a href="../../spring/ORM/" class="dropdown-item">ORM</a>
</li>
                                    
<li>
    <a href="../../spring/JPA/" class="dropdown-item">JPA</a>
</li>
                                    
<li>
    <a href="../../spring/RestTemplate/" class="dropdown-item">RestTemplate</a>
</li>
                                    
<li>
    <a href="../../spring/WebClient/" class="dropdown-item">WebClient</a>
</li>
                                    
<li>
    <a href="../../spring/Spring%20boot%20annotations/" class="dropdown-item">Spring boot annotations</a>
</li>
                                    
<li>
    <a href="../../spring/Spring%20Security/" class="dropdown-item">Spring Security</a>
</li>
                                    
<li>
    <a href="../../spring/SpringMVC/" class="dropdown-item">Spring MVC</a>
</li>
                                    
<li>
    <a href="../../spring/JSP/" class="dropdown-item">JSP</a>
</li>
                                    
<li>
    <a href="../../spring/Oauth/" class="dropdown-item">OAuth2</a>
</li>
                                    
<li>
    <a href="../../spring/JWT/" class="dropdown-item">JWT</a>
</li>
                                    
<li>
    <a href="../../spring/Keycloak%20Implementation/" class="dropdown-item">Keycloak</a>
</li>
                                    
<li>
    <a href="../../spring/Scheduling/" class="dropdown-item">Scheduling</a>
</li>
                                    
<li>
    <a href="../../spring/MultithreadingSpringBoot/" class="dropdown-item">Multithreading</a>
</li>
                                    
<li>
    <a href="../../spring/CorrelationId/" class="dropdown-item">Correlation ID</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Microservices</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../microservices/Introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../microservices/EurekaServer/" class="dropdown-item">Eureka Server</a>
</li>
                                    
<li>
    <a href="../../microservices/ConfigServer/" class="dropdown-item">Configserver</a>
</li>
                                    
<li>
    <a href="../../microservices/Resiliency/" class="dropdown-item">Resiliency</a>
</li>
                                    
<li>
    <a href="../../microservices/Gateway/" class="dropdown-item">Spring Cloud Gateway</a>
</li>
                                    
<li>
    <a href="../../microservices/FeignClient/" class="dropdown-item">FeignClient</a>
</li>
                                    
<li>
    <a href="../../microservices/SpringCloudSleuth/" class="dropdown-item">SpringCloudSleuth</a>
</li>
                                    
<li>
    <a href="../../microservices/SpringCloudFunction/" class="dropdown-item">Spring Cloud Function</a>
</li>
                                    
<li>
    <a href="../../microservices/SpringCloudStream/" class="dropdown-item">Spring Cloud Stream</a>
</li>
                                    
<li>
    <a href="../../microservices/DesignPattern/" class="dropdown-item">Design Pattern</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">PostgreSQL</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../postgres/Dataset/" class="dropdown-item">Dataset</a>
</li>
                                    
<li>
    <a href="../../postgres/Question/" class="dropdown-item">Question</a>
</li>
                                    
<li>
    <a href="../../postgres/Answer/" class="dropdown-item">Answer</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Other</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../HTTP/" class="dropdown-item">HTTP</a>
</li>
                                    
<li>
    <a href="../Maven/" class="dropdown-item">Maven</a>
</li>
                                    
<li>
    <a href="../Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../Docker/" class="dropdown-item">Docker</a>
</li>
                                    
<li>
    <a href="../Redis/" class="dropdown-item">Redis</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">RabbitMQ</a>
</li>
                                    
<li>
    <a href="../AWS/" class="dropdown-item">AWS</a>
</li>
                                    
<li>
    <a href="../Agile/" class="dropdown-item">Agile</a>
</li>
                                    
<li>
    <a href="../Flowchart/" class="dropdown-item">Flowchart</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Interview</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../interview/IntroduceYourself/" class="dropdown-item">Introduce Yourself</a>
</li>
                                    
<li>
    <a href="../../interview/Question/" class="dropdown-item">Question</a>
</li>
                                    
<li>
    <a href="../../interview/Programs/" class="dropdown-item">Programs</a>
</li>
                                    
<li>
    <a href="../../interview/Practice/" class="dropdown-item">Practice</a>
</li>
                                    
<li>
    <a href="../../interview/SQLSchema/" class="dropdown-item">SQLSchema</a>
</li>
                                    
<li>
    <a href="../../interview/References/" class="dropdown-item">References</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">CBS</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../cbs/CBS/" class="dropdown-item">CBS</a>
</li>
                                    
<li>
    <a href="../../cbs/CBSDevelopment/" class="dropdown-item">CBS Developer Document</a>
</li>
                                    
<li>
    <a href="../../cbs/HLD/" class="dropdown-item">HLD</a>
</li>
                                    
<li>
    <a href="../../cbs/LLD/" class="dropdown-item">LLD</a>
</li>
                                    
<li>
    <a href="../../cbs/CBSDevelopmentBlockchain/" class="dropdown-item">CBS Developer Document(Blockchain)</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                            <li class="nav-item">
                                <a rel="prev" href="../Redis/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../AWS/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="true">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#rabbitmq" class="nav-link">RabbitMQ</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#key-features-of-rabbitmq" class="nav-link">Key features of RabbitMQ:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#key-concepts-in-rabbitmq" class="nav-link">Key Concepts in RabbitMQ:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#using-rabbitmq-in-spring-boot-application" class="nav-link">Using RabbitMQ in Spring Boot Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#durability-features-in-rabbitmq" class="nav-link">Durability Features in RabbitMQ</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="rabbitmq">RabbitMQ</h1>
<p>RabbitMQ is a message queueing system that follows the Advanced Message Queuing Protocol (AMQP). It is used to send messages between different systems, microservices, or even different parts of an application. It's helpful in distributed applications where reliability and communication between components are critical.</p>
<hr />
<h2 id="key-features-of-rabbitmq">Key features of RabbitMQ:</h2>
<h3 id="message-queues">Message Queues:</h3>
<p>RabbitMQ stores messages in queues, which can then be consumed by various services.</p>
<h3 id="routing">Routing:</h3>
<p>It allows messages to be routed to different queues based on routing rules.</p>
<h3 id="reliability">Reliability:</h3>
<p>It ensures message durability (storing messages on disk) and supports message acknowledgment, making sure messages are reliably delivered.</p>
<h3 id="scalability">Scalability:</h3>
<p>RabbitMQ can scale by clustering multiple instances, allowing for high availability and load balancing.</p>
<h3 id="flexible-messaging-patterns">Flexible Messaging Patterns:</h3>
<p>It supports different messaging patterns such as publish/subscribe, request/reply, and point-to-point communication.</p>
<h3 id="management-and-monitoring">Management and Monitoring:</h3>
<p>RabbitMQ comes with a web-based management interface for monitoring queues, exchanges, and connections.</p>
<hr />
<h2 id="key-concepts-in-rabbitmq">Key Concepts in RabbitMQ:</h2>
<ul>
<li><strong>Producer:</strong> The entity that sends messages to the queue.</li>
<li><strong>Queue:</strong> A buffer that holds messages until they can be processed by a consumer.</li>
<li><strong>Consumer:</strong> The entity that receives and processes messages from the queue.</li>
<li>
<p><strong>Exchange:</strong> A routing mechanism that decides how to route messages to one or more queues.</p>
<ul>
<li><strong>Direct Exchange:</strong> Routes messages with a specific routing key.</li>
<li><strong>Topic Exchange:</strong> Routes messages based on routing keys that match patterns.</li>
<li><strong>Fanout Exchange:</strong> Routes messages to all bound queues.</li>
</ul>
</li>
<li>
<p><strong>Binding:</strong> A link between an exchange and a queue that tells the exchange where to send the message. The pattern might contain wildcards, such as * (matches exactly one word) and # (matches zero or more words).</p>
</li>
<li><strong>Example of binding key patterns:</strong><ul>
<li>animals.*.mammal — Matches any routing key that starts with animals., followed by any word, and ending with .mammal.</li>
<li>animals.# — Matches any routing key that starts with animals. followed by any number of words.</li>
<li><em>.dog.</em> — Matches any routing key with .dog. as the second word.</li>
</ul>
</li>
<li><strong>Message:</strong> The actual data being sent between the producer and consumer.</li>
</ul>
<h2 id="using-rabbitmq-in-spring-boot-application">Using RabbitMQ in Spring Boot Application</h2>
<h3 id="step-1-add-dependencies">Step 1: Add Dependencies</h3>
<p>Add the necessary dependencies to your <code>pom.xml</code> (for Maven) or <code>build.gradle</code> (for Gradle).</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="step-2-configure-rabbitmq-in-applicationproperties">Step 2: Configure RabbitMQ in application.properties</h3>
<p>Configure RabbitMQ connection details in the <code>application.properties</code> or <code>application.yml</code> file.</p>
<pre><code class="language-properties"># RabbitMQ Configuration
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.virtual-host=/
</code></pre>
<h3 id="step-3-create-a-configuration-class-for-rabbitmq">Step 3: Create a Configuration Class for RabbitMQ</h3>
<p>You can configure RabbitMQ using @Configuration in a separate class. This step involves declaring Queue, Exchange, and Binding.</p>
<pre><code class="language-java">import org.springframework.amqp.core.Queue;
import org.springframework.amqp.core.TopicExchange;
import org.springframework.amqp.core.Binding;
import org.springframework.amqp.core.BindingBuilder;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class RabbitMQConfig {

    @Bean
    public Queue queue() {
        return new Queue(&quot;testQueue&quot;, true);
    }

    @Bean
    public TopicExchange exchange() {
        return new TopicExchange(&quot;testExchange&quot;);
    }

    @Bean
    public Binding binding(Queue queue, TopicExchange exchange) {
        return BindingBuilder.bind(queue).to(exchange).with(&quot;routing.key.#&quot;);
    }
}
</code></pre>
<p>This configuration creates:</p>
<p>A queue named testQueue.
A topic exchange named testExchange.
A binding between the queue and exchange with a routing key.</p>
<h3 id="step-4-create-a-producer-sender-to-send-messages">Step 4: Create a Producer (Sender) to Send Messages</h3>
<p>Create a service that will send messages to RabbitMQ.</p>
<pre><code class="language-java">import org.springframework.amqp.core.AmqpTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class MessageProducer {

    @Autowired
    private AmqpTemplate amqpTemplate;

    @Autowired
    private TopicExchange exchange;

    public void sendMessage(String message) {
        amqpTemplate.convertAndSend(exchange.getName(), &quot;routing.key.test&quot;, message);
        System.out.println(&quot;Sent: &quot; + message);
    }
}
</code></pre>
<p>In this code, amqpTemplate.convertAndSend sends the message to the RabbitMQ exchange with the specified routing key.</p>
<h3 id="step-5-create-a-consumer-listener-to-receive-messages">Step 5: Create a Consumer (Listener) to Receive Messages</h3>
<p>Create a listener that listens for messages from RabbitMQ.</p>
<pre><code class="language-java">import org.springframework.amqp.rabbit.annotation.RabbitListener;
import org.springframework.stereotype.Service;

@Service
public class MessageListener {

    @RabbitListener(queues = &quot;testQueue&quot;)
    public void receiveMessage(String message) {
        System.out.println(&quot;Received: &quot; + message);
    }
}
</code></pre>
<p>This listener listens on the testQueue and prints the received messages.</p>
<h3 id="step-6-test-the-application">Step 6: Test the Application</h3>
<p>In your main application class or a test class, you can autowire the MessageProducer and send a message to RabbitMQ:</p>
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class RabbitmqExampleApplication implements CommandLineRunner {

    @Autowired
    private MessageProducer messageProducer;

    public static void main(String[] args) {
        SpringApplication.run(RabbitmqExampleApplication.class, args);
    }

    @Override
    public void run(String... args) throws Exception {
        messageProducer.sendMessage(&quot;Hello, RabbitMQ!&quot;);
    }
}
</code></pre>
<h2 id="durability-features-in-rabbitmq">Durability Features in RabbitMQ</h2>
<ul>
<li><strong>Durable Queues</strong>: Queues survive broker restarts.</li>
</ul>
<pre><code class="language-java">@Bean
public Queue queue() {
    return new Queue(QUEUE_NAME, true); // 'true' makes the queue durable
}
</code></pre>
<ul>
<li><strong>Persistent Messages</strong>: Messages are saved to disk and not lost if the broker crashes.</li>
</ul>
<pre><code class="language-java">public void sendMessage(String message) {
    // Sending persistent message
    rabbitTemplate.convertAndSend(RabbitMQConfig.EXCHANGE_NAME, RabbitMQConfig.ROUTING_KEY, message, messagePostProcessor -&gt; {
        messagePostProcessor.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT); // Makes the message persistent
        return messagePostProcessor;
    });
}
</code></pre>
<ul>
<li><strong>Acknowledgments</strong>: Ensures messages are only removed once processed by the consumer.</li>
<li>By default, Spring AMQP automatically acknowledges messages once they have been processed by the consumer.</li>
<li><strong>Publisher Confirms</strong>: Confirms that the message has been successfully received by the broker.</li>
</ul>
<pre><code class="language-java">@Configuration
public class RabbitMQConfig {

    @Bean
    public ConnectionFactory connectionFactory() {
        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(&quot;localhost&quot;);
        connectionFactory.setPublisherConfirms(true); // Enable publisher confirms
        return connectionFactory;
    }
}
</code></pre>
<ul>
<li><strong>Dead Letter Queues (DLQ)</strong>: Stores messages that cannot be processed.</li>
</ul>
<pre><code class="language-java">@Bean
public Queue dlq() {
    return new Queue(&quot;deadLetterQueue&quot;, true); // Create DLQ
}

@Bean
public Binding dlqBinding() {
    return BindingBuilder.bind(dlq()).to(new DirectExchange(&quot;dlxExchange&quot;)).with(&quot;dlxRoutingKey&quot;);
}

@Bean
public Queue queue() {
    Map&lt;String, Object&gt; arguments = new HashMap&lt;&gt;();
    arguments.put(&quot;x-dead-letter-exchange&quot;, &quot;dlxExchange&quot;);
    arguments.put(&quot;x-dead-letter-routing-key&quot;, &quot;dlxRoutingKey&quot;);

    return new Queue(&quot;mainQueue&quot;, true, false, false, arguments);
}
</code></pre>
<ul>
<li><strong>High Availability Queues</strong>: Ensures queues are available even in the event of a node failure.</li>
</ul>
<p><strong>Example:</strong> One DLQ for each queue</p>
<pre><code class="language-java">@Configuration
public class RabbitMQConfig {

    @Bean
    public Queue queue1() {
        return QueueBuilder.durable(&quot;queue1&quot;)
            .withArgument(&quot;x-dead-letter-exchange&quot;, &quot;DLX-exchange&quot;)
            .withArgument(&quot;x-dead-letter-routing-key&quot;, &quot;queue1-dlq&quot;)
            .withArgument(&quot;x-message-ttl&quot;, 60000) // 1 minute TTL
            .build();
    }


    @Bean
    public Queue queue1DLQ() {
        return QueueBuilder.durable(&quot;queue1-dlq&quot;).build();
    }

    @Bean
    public Queue queue2() {
        return QueueBuilder.durable(&quot;queue2&quot;)
                .withArgument(&quot;x-dead-letter-exchange&quot;, &quot;DLX-exchange&quot;)
                .withArgument(&quot;x-dead-letter-routing-key&quot;, &quot;queue2-dlq&quot;)
                .build();
    }

    @Bean
    public Queue queue2DLQ() {
        return QueueBuilder.durable(&quot;queue2-dlq&quot;).build();
    }

    @Bean
    public DirectExchange directExchange() {
        return new DirectExchange(&quot;DLX-exchange&quot;);
    }

    @Bean
    public Binding queue1Binding() {
        return BindingBuilder.bind(queue1()).to(directExchange()).with(&quot;queue1&quot;);
    }

    @Bean
    public Binding queue2Binding() {
        return BindingBuilder.bind(queue2()).to(directExchange()).with(&quot;queue2&quot;);
    }

    @Bean
    public Binding queue1DLQBinding() {
        return BindingBuilder.bind(queue1DLQ()).to(directExchange()).with(&quot;queue1-dlq&quot;);
    }

    @Bean
    public Binding queue2DLQBinding() {
        return BindingBuilder.bind(queue2DLQ()).to(directExchange()).with(&quot;queue2-dlq&quot;);
    }
}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
